"use strict";(self["webpackChunkonelist_web"]=self["webpackChunkonelist_web"]||[]).push([[478],{2478:function(e,a,l){l.r(a),l.d(a,{default:function(){return U}});var t=l(2206),i=l(8912);const s=e=>((0,t.dD)("data-v-90cb3bb0"),e=e(),(0,t.Cn)(),e),o={key:0,class:"load"},u={key:1,class:"content"},r={class:"seriesTab"},n={class:"seriesTab-list"},c={class:"seriesTab-item"},v={class:"seriesTab-item"},d=s((()=>(0,t._)("i",{class:"bx bx-left-arrow-alt"},null,-1))),w={class:"seriesTab-item"},h=s((()=>(0,t._)("i",{class:"bx bx-right-arrow-alt"},null,-1))),g={class:"seriesTab-item"},p=s((()=>(0,t._)("i",{class:"bx bx-filter"},null,-1))),m={class:"card-show-content view-card-list"},_={class:"view-item-header"},b={class:"view-item-tag-list"},f={class:"view-item-tag rating"},y={key:0,class:"view-item-tag count"},k=s((()=>(0,t._)("i",{class:"bx bx-check"},null,-1))),x=[k],H=["src"],C={key:0,class:"view-item-title"},M={key:1,class:"view-item-title"},z=s((()=>(0,t._)("i",{class:"bx bx-x"},null,-1))),N={class:"sort-list"},O={class:"sort-list"};function D(e,a,l,s,k,D){const S=(0,t.up)("n-button"),W=(0,t.up)("router-link"),q=(0,t.up)("n-radio"),T=(0,t.up)("n-space"),$=(0,t.up)("n-radio-group"),U=(0,t.up)("n-card"),F=(0,t.up)("n-modal");return s.loading?((0,t.wg)(),(0,t.iD)("div",o)):((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",r,[(0,t._)("div",n,[(0,t._)("div",c,(0,i.zw)(s.pageText),1),(0,t._)("div",v,[(0,t.Wm)(S,{onClick:a[0]||(a[0]=a=>e.BackPage()),strong:"",secondary:"",circle:""},{default:(0,t.w5)((()=>[d])),_:1})]),(0,t._)("div",w,[(0,t.Wm)(S,{onClick:a[1]||(a[1]=e=>D.NextPage()),strong:"",secondary:"",circle:""},{default:(0,t.w5)((()=>[h])),_:1})]),(0,t._)("div",g,[(0,t.Wm)(S,{onClick:a[2]||(a[2]=e=>s.showSort=!s.showSort),strong:"",secondary:"",circle:""},{default:(0,t.w5)((()=>[p])),_:1})])])]),(0,t._)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.data,((a,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"view-item",key:l},[(0,t.Wm)(W,{to:{path:"/video",query:{id:a.id,gallery_type:s.data_type}}},{default:(0,t.w5)((()=>[(0,t._)("div",_,[(0,t._)("div",b,[(0,t._)("div",f,(0,i.zw)(isNaN(Math.floor(100*a.vote_average)/100)?"":Math.floor(100*a.vote_average)/100),1),a.played?((0,t.wg)(),(0,t.iD)("div",y,x)):(0,t.kq)("",!0)])]),(0,t._)("img",{loading:"lazy",class:"carousel-img",src:e.COMMON.imgUrl+"/t/p/w220_and_h330_face/"+a.poster_path},null,8,H),null!=a.video?((0,t.wg)(),(0,t.iD)("div",C,(0,i.zw)(a.title),1)):((0,t.wg)(),(0,t.iD)("div",M,(0,i.zw)(a.name),1))])),_:2},1032,["to"])])))),128))]),(0,t.Wm)(F,{show:s.showSort,"onUpdate:show":a[5]||(a[5]=e=>s.showSort=e),"transform-origin":"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{style:{width:"600px"},title:"选择分类",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":(0,t.w5)((()=>[(0,t.Wm)(S,{onClick:a[3]||(a[3]=e=>s.showSort=!s.showSort),strong:"",secondary:"",circle:""},{default:(0,t.w5)((()=>[z])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",N,[(0,t._)("div",O,[(0,t.Wm)($,{value:s.mode,"onUpdate:value":a[4]||(a[4]=e=>s.mode=e),name:"radiogroup"},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{vertical:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.modes,(e=>((0,t.wg)(),(0,t.j4)(q,{onChange:s.handleChange,class:"sort-item",checked:s.mode===e.value,key:e.value,value:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["onChange","checked","value"])))),128))])),_:1})])),_:1},8,["value"])])])])),_:1})])),_:1},8,["show"])]))}var S=l(3421),W=l(3579),q={name:"VideoSearch",setup(){const e=(0,S.iH)(null),a=(0,S.iH)(null),l=(0,S.iH)(null),i=(0,S.iH)(null),s=(0,S.iH)(null),o=(0,S.iH)(!0),{proxy:u}=(0,t.FN)(),r=(0,S.iH)(null),n=(0,S.iH)(!1),c=(0,S.iH)(null),v=(0,S.iH)(null),d=(0,S.iH)(null),w=(0,S.iH)(null);a.value=48,l.value=1;const h=(0,S.iH)(8);u.COMMON.isMo&&(h.value=3);const g=(0,S.iH)(null);function p(){let e=a.value;r.value<a.value&&(e=r.value),g.value=r.value+" 的 "+(l.value-1)*a.value+"-"+((l.value-1)*a.value+e)}function m(){let t=u.COMMON.apiUrl+`/v1/api/themovie/search?q=${w.value}&?page=${l.value}&size=${a.value}`;"tv"==e.value&&(t=u.COMMON.apiUrl+`/v1/api/thetv/search?q=${w.value}&?page=${l.value}&size=${a.value}`),u.axios.post(t,{},{headers:{"content-type":"application/json",Authorization:u.$cookies.get("Authorization")}}).then((e=>{200==e.data.code&&(i.value=e.data.data,r.value=e.data.num,o.value=!1,p())})).catch((e=>{u.COMMON.ShowMsg(e)}))}e.value="movie",c.value=e.value,w.value=u.$route.query.q,(0,W.ao)(((e,a)=>{w.value=e.query.q,m()}));const _=()=>{m()};return(0,t.bv)((()=>{m()})),{data_type:e,per_card:h,data:i,loading:o,error:s,page:l,size:a,num:r,search:n,pageText:g,genre:v,year:d,reF:_,handleChange(){l.value=1,e.value=c.value,m()},showSort:(0,S.iH)(!1),showFilter:(0,S.iH)(!1),mode:c,modes:[{value:"tv",label:"节目"},{value:"movie",label:"电影"}].map((e=>(e.value=e.value.toLowerCase(),e)))}},methods:{NextPage(){this.page=this.page+1,this.reF()}}},T=l(475);const $=(0,T.Z)(q,[["render",D],["__scopeId","data-v-90cb3bb0"]]);var U=$}}]);
//# sourceMappingURL=478.05fae237.js.map